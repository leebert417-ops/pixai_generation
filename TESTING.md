# 测试清单

## 准备工作

- [ ] 代理服务器正在运行 (`python pixai_proxy.py`)
- [ ] SillyTavern 已启动
- [ ] 已刷新浏览器 (Ctrl+Shift+R)
- [ ] 已在设置中输入 API 密钥

## 功能测试

### 1. 设置界面测试

#### 基本设置
- [ ] API 密钥输入框正常显示
- [ ] 模型 ID 输入框正常显示
- [ ] 采样器下拉菜单正常显示
- [ ] 采样器默认值为 "DPM++ 2M Karras"
- [ ] 负面提示词文本框正常显示

#### Lora 设置
- [ ] "使用 Lora" 复选框正常显示
- [ ] 订阅层级提示信息正确显示
- [ ] 默认状态下 Lora 设置区域隐藏
- [ ] 勾选 "使用 Lora" 后，Lora 设置区域显示
- [ ] 取消勾选后，Lora 设置区域隐藏
- [ ] "添加 Lora" 按钮正常显示
- [ ] 点击 "添加 Lora" 按钮成功添加 Lora 项
- [ ] 每个 Lora 项显示 ID 输入框和权重输入框
- [ ] 每个 Lora 项显示删除按钮
- [ ] Lora ID 输入框正常工作
- [ ] Lora 权重输入框正常工作（范围 0-1）
- [ ] 删除 Lora 按钮正常工作
- [ ] 可以添加多个 Lora
- [ ] 删除其中一个 Lora 不影响其他 Lora

#### 其他参数
- [ ] Sampling Steps 滑块正常工作 (1-50)
- [ ] CFG Scale 滑块正常工作 (1-20)
- [ ] Width 滑块正常工作 (64-1024, 步长 64)
- [ ] Height 滑块正常工作 (64-1024, 步长 64)

### 2. 设置保存测试

- [ ] 修改采样器后刷新页面，设置保持
- [ ] 勾选 "使用 Lora" 后刷新页面，设置保持
- [ ] 填写 Lora ID 后刷新页面，设置保持
- [ ] 所有其他设置刷新后保持

### 3. 图像生成测试

#### 基本生成
```
/pixai 1girl, white hair, blue eyes, smile
```
- [ ] 命令执行成功
- [ ] 显示 "正在创建任务..." 提示
- [ ] 显示 "正在等待生成..." 提示
- [ ] 图像生成完成后显示成功提示
- [ ] 图像自动添加到聊天记录

#### 使用采样器
测试不同采样器：
```
/pixai 1girl, white hair, blue eyes, smile
```
- [ ] Euler a
- [ ] Euler
- [ ] DPM++ 2M Karras
- [ ] DPM++ SDE Karras
- [ ] DPM++ 2M SDE Karras
- [ ] DDIM
- [ ] PLMS
- [ ] UniPC

#### 不使用 Lora
- [ ] 取消勾选 "使用 Lora"
- [ ] 生成图像
- [ ] 确认图像生成成功（不应用 Lora）

#### 使用 Lora
- [ ] 勾选 "使用 Lora"
- [ ] 填写有效的 Lora ID
- [ ] 设置 Lora 权重（例如 0.7）
- [ ] 生成图像
- [ ] 确认图像生成成功（应用 Lora）

#### 使用命令行参数
```
/pixai 1girl, white hair, blue eyes, smile --negative worst quality, low quality --width 768 --height 1024 --steps 30 --scale 7
```
- [ ] 命令执行成功
- [ ] 参数正确应用

### 4. 错误处理测试

#### API 密钥错误
- [ ] 清空 API 密钥
- [ ] 尝试生成图像
- [ ] 显示 "API 密钥未设置" 错误

#### 代理服务器未运行
- [ ] 停止代理服务器
- [ ] 尝试生成图像
- [ ] 显示连接错误

#### 无效的模型 ID
- [ ] 输入无效的模型 ID
- [ ] 尝试生成图像
- [ ] 显示 API 错误信息

#### 空提示词
```
/pixai
```
- [ ] 显示 "提示词不能为空" 错误

### 5. 代理服务器测试

- [ ] 启动代理服务器
- [ ] 看到 "监听地址: http://127.0.0.1:5555" 消息
- [ ] 生成图像时，代理服务器窗口显示请求日志
- [ ] 代理服务器正确转发请求到 PixAI API

## 性能测试

- [ ] 生成 512x768 图像，记录时间：______ 秒
- [ ] 生成 768x1024 图像，记录时间：______ 秒
- [ ] 连续生成 3 张图像，无错误

## 兼容性测试

- [ ] Windows 10/11
- [ ] Python 3.7+
- [ ] SillyTavern 1.12.0+

## 已知问题

记录测试中发现的问题：

1. 
2. 
3. 

## 测试结论

- [ ] 所有核心功能正常
- [ ] 所有设置正确保存和加载
- [ ] 错误处理正确
- [ ] 性能可接受
- [ ] 可以发布使用

